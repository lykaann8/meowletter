<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch the Pok√©mon</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Comic Sans MS",cursive;
  overflow:hidden;
}

/* ---------- SCREENS ---------- */
.screen{
  display:none;
  position:fixed;
  inset:0;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}
.screen.active{display:flex}

/* ---------- GAME ---------- */
#gameScreen{
  background:url("images/pink.jpg") center/cover no-repeat;
}
#gameArea{
  position:absolute;
  inset:0;
}
#instructions{
  position:absolute;
  top:20px;
  padding:14px 22px;
  background:rgba(255,255,255,0.85);
  border-radius:20px;
  font-size:18px;
  z-index:5;
  text-align:center;
}

/* ---------- FALLING OBJECTS ---------- */
.falling{
  position:absolute;
  width:90px;
  cursor:pointer;
  animation:fall linear forwards;
}
.cat{
  animation:fall 7s linear forwards, wiggle 1s infinite;
}
.decor{
  width:40px;
  opacity:0.6;
  pointer-events:none;
}

@keyframes fall{
  from{top:-120px}
  to{top:110vh}
}
@keyframes wiggle{
  0%{transform:rotate(0)}
  25%{transform:rotate(5deg)}
  50%{transform:rotate(-5deg)}
  75%{transform:rotate(5deg)}
  100%{transform:rotate(0)}
}

/* ---------- CATCH EFFECT ---------- */
.catchBall{
  position:absolute;
  width:90px;
  pointer-events:none;
  animation:catch 0.6s ease-out forwards;
  z-index:10;
}
@keyframes catch{
  0%{transform:scale(0.5);opacity:0}
  30%{transform:scale(1.1) rotate(15deg);opacity:1}
  60%{transform:rotate(-15deg)}
  100%{transform:scale(0.2) rotate(360deg);opacity:0}
}

/* ---------- WIN BUTTON ---------- */
#winBtn{
  display:none;
  padding:18px 36px;
  font-size:22px;
  border:none;
  border-radius:30px;
  background:#ff69b4;
  color:white;
  cursor:pointer;
  animation:pulse 1.5s infinite;
}
@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.08)}
  100%{transform:scale(1)}
}

/* ---------- LOSE ---------- */
#loseScreen{
  background:url("images/pink.jpg") center/cover no-repeat;
  text-align:center;
}
#loseScreen h1{
  background:rgba(255,255,255,0.85);
  padding:20px 30px;
  border-radius:20px;
  margin-bottom:20px;
}

/* ---------- LETTER ---------- */
#letterScreen{
  background:url("images/pink.jpg") center/cover no-repeat;
}
#paper{
  width:90%;
  max-width:720px;
  max-height:80vh;
  background:rgba(255,255,255,0.92);
  border-radius:24px;
  padding:30px;
  overflow-y:auto;
  box-shadow:0 20px 40px rgba(0,0,0,0.25);
  animation:unfold 1.8s ease forwards;
  transform-origin:top;
}
@keyframes unfold{
  from{transform:scaleY(0);opacity:0}
  to{transform:scaleY(1);opacity:1}
}
#paper p{
  margin-bottom:16px;
  line-height:1.7;
  opacity:0;
  transition:opacity 1.2s ease;
}
.signature{
  margin-top:20px;
  font-weight:bold;
  text-align:right;
}

/* scrollbar */
#paper::-webkit-scrollbar{width:6px}
#paper::-webkit-scrollbar-thumb{
  background:#ff9ecf;
  border-radius:10px;
}
</style>
</head>

<body>

<!-- GAME -->
<div id="gameScreen" class="screen active">
  <div id="instructions">
    Let‚Äôs play a game ‚ú®<br>
    Catch one of each Pok√©mon to see a surprise
  </div>
  <div id="gameArea"></div>
  <button id="winBtn">See your surprise üíñ</button>
</div>

<!-- LOSE -->
<div id="loseScreen" class="screen">
  <h1>üê± The cats like their freedom and don‚Äôt want to be caught</h1>
  <button onclick="restart()">Try again</button>
</div>

<!-- LETTER -->
<div id="letterScreen" class="screen">
  <div id="paper">
    <p>Happy Retreat Muzel! üê±üíñ</p>
    <p>Just wanna say na I really appreciate you...</p>
    <p>What I admire about you is kung gaano ka kathoughtful...</p>
    <p>Gusto ko lang din sabihin na it goes both ways...</p>
    <p>Thank you din sa pagbuhat sa amin ni Mazi sa Dota...</p>
    <p>I hope during this retreat, makapag-focus ka sa goals mo...</p>
    <p>Yun lang. Ingat palagi poooo. Enjoy your retreat!</p>
    <div class="signature">Your plus one,<br>Meow üêæüíñ</div>
  </div>
</div>

<audio id="bgMusic" src="music.mp3" loop></audio>

<script>
const gameArea=document.getElementById("gameArea");
const winBtn=document.getElementById("winBtn");
const bgMusic=document.getElementById("bgMusic");
const paragraphs=[...document.querySelectorAll("#paper p")];

const caught={salamence:false,gengar:false,arcanine:false};

function spawn(type,src){
  const img=document.createElement("img");
  img.src=src;
  img.className="falling "+type;
  img.style.left=Math.random()*90+"vw";
  img.style.animationDuration=(5+Math.random()*3)+"s";
  gameArea.appendChild(img);

  img.onclick=()=>{
    if(type==="cat"){
      document.getElementById("gameScreen").classList.remove("active");
      document.getElementById("loseScreen").classList.add("active");
      return;
    }

    const name=src.split("/").pop().split(".")[0];
    caught[name]=true;

    const rect=img.getBoundingClientRect();
    const areaRect=gameArea.getBoundingClientRect();

    const ball=document.createElement("img");
    ball.src="images/pokeball (2).png";
    ball.className="catchBall";
    ball.style.left=(rect.left-areaRect.left)+"px";
    ball.style.top=(rect.top-areaRect.top)+"px";
    gameArea.appendChild(ball);

    img.style.visibility="hidden";

    setTimeout(()=>{
      ball.remove();
      img.remove();
      if(Object.values(caught).every(v=>v)){
        winBtn.style.display="block";
      }
    },600);
  };

  img.onanimationend=()=>img.remove();
}

/* spawns */
setInterval(()=>{
  spawn("pokemon","images/salamence.png");
  spawn("pokemon","images/gengar.png");
  spawn("pokemon","images/arcanine.png");
  spawn("cat","images/meow.png");
},1600);

setInterval(()=>{
  const d=document.createElement("img");
  d.src="images/pokeball (2).png";
  d.className="falling decor";
  d.style.left=Math.random()*100+"vw";
  d.style.animationDuration="10s";
  gameArea.appendChild(d);
  d.onanimationend=()=>d.remove();
},900);

/* win */
winBtn.onclick=()=>{
  document.getElementById("gameScreen").classList.remove("active");
  document.getElementById("letterScreen").classList.add("active");

  bgMusic.volume=0;
  bgMusic.play();
  let v=0;
  const fade=setInterval(()=>{
    v+=0.03;
    bgMusic.volume=Math.min(v,1);
    if(v>=1) clearInterval(fade);
  },150);

  let i=0;
  function type(){
    if(i<paragraphs.length){
      paragraphs[i].style.opacity=1;
      i++;
      setTimeout(type,900);
    }
  }
  type();
};

function restart(){ location.reload(); }
</script>

</body>
</html>
