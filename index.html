<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Retreat üíñ</title>

<style>
body {
  margin:0;
  font-family:'Comic Sans MS', cursive, sans-serif;
  background:url('pink.jpg') center/cover no-repeat;
  text-align:center;
  overflow:hidden;
}

/* TOP MESSAGE */
#gameMessage {
  margin-top:24px;
  font-size:1.6em;
  color:#ff4fa0;
  text-shadow:2px 2px #fff;
}

/* GAME AREA */
#gameArea {
  position:relative;
  width:100%;
  height:70vh;
  overflow:hidden;
}

/* FALLING OBJECTS */
.falling {
  position:absolute;
  top:-120px;
  animation:fall linear forwards;
}

@keyframes fall {
  from { transform:translateY(0); }
  to { transform:translateY(90vh); }
}

/* POKEMON */
.pokemon {
  width:90px;
  cursor:pointer;
  transition:transform 0.2s ease;
}
.pokemon:hover { transform:scale(1.1); }

/* CAT */
.cat {
  width:80px;
  cursor:pointer;
}

/* DECOR POKEBALL */
.decor {
  width:40px;
  opacity:0.8;
}

/* CATCH EFFECT */
.catchBall {
  position:absolute;
  width:80px;
  pointer-events:none;
  animation:catch 0.5s ease forwards;
}
@keyframes catch {
  0% { transform:scale(0.4) rotate(0deg); opacity:0; }
  50% { transform:scale(1.2) rotate(180deg); opacity:1; }
  100% { transform:scale(0.2) rotate(360deg); opacity:0; }
}

/* SURPRISE BUTTON */
#surpriseBtn {
  display:none;
  margin-top:18px;
  padding:14px 32px;
  font-size:20px;
  background:#ff69b4;
  color:white;
  border:none;
  border-radius:18px;
  cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  animation:pulse 1.2s infinite;
}
@keyframes pulse {
  0% { transform:scale(1); }
  50% { transform:scale(1.08); }
  100% { transform:scale(1); }
}

/* TRY AGAIN SCREEN */
#tryAgain {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(255,240,247,0.96);
  z-index:1000;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  font-size:1.5em;
  color:#ff4fa0;
}
#tryAgain button {
  margin-top:20px;
  padding:12px 26px;
  font-size:18px;
  background:#ff69b4;
  color:white;
  border:none;
  border-radius:16px;
  cursor:pointer;
}

/* LETTER SCREEN */
#letterScreen {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(255,240,247,0.95);
  overflow-y:auto;
  animation:fadeIn 0.8s ease forwards;
}
@keyframes fadeIn {
  from { opacity:0; }
  to { opacity:1; }
}

#letter {
  max-width:90%;
  margin:50px auto;
  padding:35px;
  background:rgba(255,255,255,0.85);
  border-radius:26px;
  box-shadow:0 20px 35px rgba(0,0,0,0.25);
  text-align:left;
  line-height:1.8;
  transform-origin:top;
  animation:openPaper 0.8s ease forwards;
}
@keyframes openPaper {
  from { transform:scaleY(0); }
  to { transform:scaleY(1); }
}

.signature {
  margin-top:30px;
  font-weight:bold;
  text-align:right;
}
</style>
</head>

<body>

<div id="gameMessage">
  Let‚Äôs play a game üéÆüíñ<br>
  Catch one of each Pok√©mon to see a surprise!
</div>

<div id="gameArea"></div>
<button id="surpriseBtn">See your surprise üíï</button>

<div id="tryAgain">
  <div>The cats like their freedom and don‚Äôt want to be caught üòø</div>
  <button onclick="restartGame()">Try again</button>
</div>

<div id="letterScreen">
  <div id="letter">
    <!-- YOUR LETTER CONTENT ‚Äì UNCHANGED -->
    <p>Happy Retreat Muzel! üê±üíñ</p>
    <p>Just wanna say na I really appreciate you. Like sobrang random pero minsan napapaisip lang ako na ang bait mo talaga haha...</p>
    <div class="signature">Your plus one,<br>Meow üê±üíï</div>
  </div>
</div>

<audio id="music" src="music.mp3"></audio>

<script>
const gameArea = document.getElementById("gameArea");
const surpriseBtn = document.getElementById("surpriseBtn");
const tryAgain = document.getElementById("tryAgain");
const letterScreen = document.getElementById("letterScreen");
const music = document.getElementById("music");

const pokemonList = {
  arcanine:false,
  gengar:false,
  salamence:false
};

function spawnPokemon(name, src) {
  const img = document.createElement("img");
  img.src = src;
  img.className = "falling pokemon";
  img.style.left = Math.random()*80 + "vw";
  img.style.animationDuration = (6 + Math.random()*3) + "s";

  img.onclick = () => {
    if (!pokemonList[name]) pokemonList[name] = true;

    const ball = document.createElement("img");
    ball.src = "images/pokeball (2).png";
    ball.className = "catchBall";
    ball.style.left = img.offsetLeft + "px";
    ball.style.top = img.offsetTop + "px";
    gameArea.appendChild(ball);

    setTimeout(()=>ball.remove(),500);
    img.remove();
    checkWin();
  };

  img.addEventListener("animationend", ()=>img.remove());
  gameArea.appendChild(img);
}

function spawnCat() {
  const img = document.createElement("img");
  img.src = "images/cat.png";
  img.className = "falling cat";
  img.style.left = Math.random()*80 + "vw";
  img.style.animationDuration = (6 + Math.random()*3) + "s";

  img.onclick = () => {
    gameArea.style.display="none";
    tryAgain.style.display="flex";
  };

  img.addEventListener("animationend", ()=>img.remove());
  gameArea.appendChild(img);
}

function spawnDecor() {
  const img = document.createElement("img");
  img.src = "images/pokeball (2).png";
  img.className = "falling decor";
  img.style.left = Math.random()*90 + "vw";
  img.style.animationDuration = (5 + Math.random()*4) + "s";
  img.addEventListener("animationend", ()=>img.remove());
  gameArea.appendChild(img);
}

function checkWin() {
  if (Object.values(pokemonList).every(v=>v)) {
    surpriseBtn.style.display="inline-block";
  }
}

function restartGame() {
  location.reload();
}

/* SPAWN LOOP */
setInterval(()=>{
  spawnDecor();
  const r = Math.random();
  if (r < 0.4) spawnPokemon("arcanine","images/arcanine.png");
  else if (r < 0.7) spawnPokemon("gengar","images/gengar.png");
  else if (r < 0.9) spawnPokemon("salamence","images/salamence.png");
  else spawnCat();
}, 1200);

surpriseBtn.onclick = () => {
  document.body.style.transition="opacity 0.6s ease";
  document.body.style.opacity="0";
  setTimeout(()=>{
    document.body.style.opacity="1";
    document.getElementById("gameMessage").style.display="none";
    gameArea.style.display="none";
    surpriseBtn.style.display="none";
    letterScreen.style.display="block";
    music.play();
  },600);
};
</script>

</body>
</html>
